<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vkTUNEos Media Test | Session 3</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-void: #0a0a0f; --bg-surface: #111118; --bg-card: #22222e; --bg-elevated: #2a2a38;
      --text-primary: #f0f0f5; --text-secondary: #a0a0b0; --text-muted: #606070;
      --primary-400: #22d3ee; --primary-500: #06b6d4; --accent-400: #f472b6; --accent-500: #ec4899;
      --success-500: #22c55e; --warning-500: #eab308; --error-500: #ef4444;
      --border-subtle: rgba(255,255,255,0.08); --border-default: rgba(255,255,255,0.12);
      --font-display: 'Space Grotesk', sans-serif; --font-body: 'Inter', sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font-body); background: var(--bg-void); color: var(--text-primary); }
    .font-display { font-family: var(--font-display); }
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 12px; height: 12px; background: white; border-radius: 50%; cursor: pointer; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef, useMemo } = React;

    // ======================= AUDIO PLAYER =======================
    const AudioPlayer = ({ src, title = 'Unknown Track', artist = 'Unknown Artist', coverArt, className = '' }) => {
      const audioRef = useRef(null);
      const [isPlaying, setIsPlaying] = useState(false);
      const [currentTime, setCurrentTime] = useState(0);
      const [duration, setDuration] = useState(0);
      const [volume, setVolume] = useState(0.8);

      useEffect(() => {
        const audio = audioRef.current;
        if (!audio) return;
        const onMeta = () => setDuration(audio.duration);
        const onTime = () => setCurrentTime(audio.currentTime);
        audio.addEventListener('loadedmetadata', onMeta);
        audio.addEventListener('timeupdate', onTime);
        return () => { audio.removeEventListener('loadedmetadata', onMeta); audio.removeEventListener('timeupdate', onTime); };
      }, []);

      const togglePlay = () => {
        const audio = audioRef.current;
        if (isPlaying) audio.pause(); else audio.play();
        setIsPlaying(!isPlaying);
      };

      const handleSeek = (e) => {
        const rect = e.currentTarget.getBoundingClientRect();
        const pct = (e.clientX - rect.left) / rect.width;
        audioRef.current.currentTime = pct * duration;
      };

      const formatTime = (s) => { if (!s || isNaN(s)) return '0:00'; return `${Math.floor(s / 60)}:${Math.floor(s % 60).toString().padStart(2, '0')}`; };
      const progress = duration ? (currentTime / duration) * 100 : 0;

      return (
        <div className={`rounded-xl overflow-hidden ${className}`} style={{ background: 'var(--bg-card)', border: '1px solid var(--border-subtle)' }}>
          <audio ref={audioRef} src={src} />
          <div className="p-4">
            <div className="flex items-center gap-4 mb-4">
              <div className="w-14 h-14 rounded-lg flex items-center justify-center" style={{ background: 'linear-gradient(135deg, var(--primary-500), var(--accent-500))' }}>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
              </div>
              <div className="flex-1"><h4 className="font-semibold text-sm" style={{ color: 'var(--text-primary)' }}>{title}</h4><p className="text-xs" style={{ color: 'var(--text-secondary)' }}>{artist}</p></div>
            </div>
            <div className="h-2 rounded-full cursor-pointer mb-3 relative" style={{ background: 'var(--bg-elevated)' }} onClick={handleSeek}>
              <div className="absolute inset-y-0 left-0 rounded-full" style={{ width: `${progress}%`, background: 'linear-gradient(90deg, var(--primary-500), var(--accent-500))' }} />
            </div>
            <div className="flex justify-between text-xs mb-4" style={{ color: 'var(--text-muted)' }}><span>{formatTime(currentTime)}</span><span>{formatTime(duration)}</span></div>
            <div className="flex items-center justify-center">
              <button onClick={togglePlay} className="w-12 h-12 rounded-full flex items-center justify-center" style={{ background: 'linear-gradient(135deg, var(--primary-500), var(--accent-500))' }}>
                {isPlaying ? <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                  : <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><polygon points="5 3 19 12 5 21 5 3"/></svg>}
              </button>
            </div>
          </div>
        </div>
      );
    };

    // ======================= WAVEFORM =======================
    const Waveform = ({ currentTime = 0, duration = 100, onSeek, height = 80, className = '' }) => {
      const canvasRef = useRef(null);
      const containerRef = useRef(null);
      const waveformData = useMemo(() => Array.from({ length: 100 }, () => Math.random() * 0.8 + 0.2), []);

      useEffect(() => {
        const canvas = canvasRef.current;
        const container = containerRef.current;
        if (!canvas || !container) return;
        const ctx = canvas.getContext('2d');
        const rect = container.getBoundingClientRect();
        canvas.width = rect.width; canvas.height = height;
        ctx.clearRect(0, 0, rect.width, height);
        const progressPct = duration ? currentTime / duration : 0;
        const barWidth = 3, barGap = 2;
        waveformData.forEach((value, i) => {
          const x = i * (barWidth + barGap);
          const barH = value * (height - 10);
          const y = (height - barH) / 2;
          const isPlayed = (i / waveformData.length) <= progressPct;
          const gradient = ctx.createLinearGradient(0, y, 0, y + barH);
          if (isPlayed) { gradient.addColorStop(0, '#22d3ee'); gradient.addColorStop(1, '#ec4899'); }
          else { gradient.addColorStop(0, 'rgba(255,255,255,0.2)'); gradient.addColorStop(1, 'rgba(255,255,255,0.1)'); }
          ctx.fillStyle = gradient;
          ctx.beginPath(); ctx.roundRect(x, y, barWidth, barH, 2); ctx.fill();
        });
      }, [waveformData, currentTime, duration, height]);

      const handleClick = (e) => {
        const rect = e.currentTarget.getBoundingClientRect();
        const pct = (e.clientX - rect.left) / rect.width;
        onSeek?.(pct * duration);
      };

      return <div ref={containerRef} className={`relative cursor-pointer ${className}`} onClick={handleClick} style={{ height }}><canvas ref={canvasRef} className="w-full" /></div>;
    };

    // ======================= VIDEO PLAYER =======================
    const VideoPlayer = ({ src, poster, title, className = '' }) => {
      const videoRef = useRef(null);
      const [isPlaying, setIsPlaying] = useState(false);
      const [currentTime, setCurrentTime] = useState(0);
      const [duration, setDuration] = useState(0);
      const [showControls, setShowControls] = useState(true);

      useEffect(() => {
        const video = videoRef.current;
        if (!video) return;
        video.addEventListener('loadedmetadata', () => setDuration(video.duration));
        video.addEventListener('timeupdate', () => setCurrentTime(video.currentTime));
      }, []);

      const togglePlay = () => { if (isPlaying) videoRef.current.pause(); else videoRef.current.play(); setIsPlaying(!isPlaying); };
      const handleSeek = (e) => { const rect = e.currentTarget.getBoundingClientRect(); videoRef.current.currentTime = ((e.clientX - rect.left) / rect.width) * duration; };
      const formatTime = (s) => `${Math.floor(s / 60)}:${Math.floor(s % 60).toString().padStart(2, '0')}`;

      return (
        <div className={`relative rounded-xl overflow-hidden ${className}`} style={{ background: 'black' }} onMouseEnter={() => setShowControls(true)} onMouseLeave={() => isPlaying && setShowControls(false)}>
          <video ref={videoRef} src={src} poster={poster} className="w-full h-full object-contain" onClick={togglePlay} />
          {!isPlaying && <div className="absolute inset-0 flex items-center justify-center bg-black/30 cursor-pointer" onClick={togglePlay}>
            <div className="w-20 h-20 rounded-full flex items-center justify-center" style={{ background: 'rgba(255,255,255,0.2)' }}><svg width="32" height="32" viewBox="0 0 24 24" fill="white"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
          </div>}
          <div className={`absolute bottom-0 left-0 right-0 p-4 transition-opacity ${showControls ? 'opacity-100' : 'opacity-0'}`} style={{ background: 'linear-gradient(transparent, rgba(0,0,0,0.8))' }}>
            <div className="h-1.5 rounded-full cursor-pointer mb-3" style={{ background: 'rgba(255,255,255,0.2)' }} onClick={handleSeek}>
              <div className="h-full rounded-full" style={{ width: `${duration ? (currentTime / duration) * 100 : 0}%`, background: 'linear-gradient(90deg, var(--primary-500), var(--accent-500))' }} />
            </div>
            <div className="flex items-center gap-3">
              <button onClick={togglePlay} className="p-2 rounded-lg hover:bg-white/20">{isPlaying ? <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg> : <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><polygon points="5 3 19 12 5 21 5 3"/></svg>}</button>
              <span className="text-sm text-white/80">{formatTime(currentTime)} / {formatTime(duration)}</span>
            </div>
          </div>
        </div>
      );
    };

    // ======================= COORDINATE TREE =======================
    const CoordinateTree = ({ data = [], selectedId, onSelect, className = '' }) => {
      const [expanded, setExpanded] = useState(new Set(['cat-1', 'cat-2']));
      const toggleExpand = (id) => { const e = new Set(expanded); if (e.has(id)) e.delete(id); else e.add(id); setExpanded(e); };

      const renderNode = (node, level = 0) => {
        const hasChildren = node.children?.length > 0;
        const isExpanded = expanded.has(node.id);
        const isSelected = selectedId === node.id;
        return (
          <div key={node.id}>
            <div className="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-all" style={{ marginLeft: `${level * 16}px`, background: isSelected ? 'linear-gradient(135deg, rgba(6,182,212,0.15), rgba(236,72,153,0.1))' : 'transparent' }}
              onClick={() => onSelect?.(node)} onMouseOver={(e) => !isSelected && (e.currentTarget.style.background = 'var(--bg-elevated)')} onMouseOut={(e) => !isSelected && (e.currentTarget.style.background = 'transparent')}>
              {hasChildren ? <button onClick={(e) => { e.stopPropagation(); toggleExpand(node.id); }} className="p-1 rounded"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" style={{ color: 'var(--text-muted)', transform: isExpanded ? 'rotate(90deg)' : '' }}><polyline points="9 18 15 12 9 6"/></svg></button> : <span className="w-6"/>}
              <span className="w-2 h-2 rounded-full" style={{ background: node.type === 'category' ? 'var(--primary-500)' : 'var(--accent-500)' }} />
              <span className="flex-1 text-sm" style={{ color: isSelected ? 'var(--primary-400)' : 'var(--text-primary)' }}>{node.name}</span>
              {node.count !== undefined && <span className="text-xs px-2 py-0.5 rounded-full" style={{ background: 'var(--bg-elevated)', color: 'var(--text-muted)' }}>{node.count}</span>}
            </div>
            {hasChildren && isExpanded && <div className="mt-1">{node.children.map((c) => renderNode(c, level + 1))}</div>}
          </div>
        );
      };
      return <div className={`rounded-xl overflow-hidden p-4 ${className}`} style={{ background: 'var(--bg-card)', border: '1px solid var(--border-subtle)' }}>{data.map((n) => renderNode(n))}</div>;
    };

    // ======================= MOOD PAD =======================
    const MoodPad = ({ onSelect, width = 300, height = 300, className = '' }) => {
      const canvasRef = useRef(null);
      const [position, setPosition] = useState({ x: 0.5, y: 0.5 });
      const [isDragging, setIsDragging] = useState(false);

      useEffect(() => {
        const canvas = canvasRef.current;
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        canvas.width = width; canvas.height = height;
        const gradient = ctx.createLinearGradient(0, 0, width, height);
        gradient.addColorStop(0, 'rgba(6,182,212,0.3)'); gradient.addColorStop(0.5, 'rgba(139,92,246,0.3)'); gradient.addColorStop(1, 'rgba(236,72,153,0.3)');
        ctx.fillStyle = gradient; ctx.fillRect(0, 0, width, height);
        ctx.strokeStyle = 'rgba(255,255,255,0.1)'; ctx.lineWidth = 1;
        for (let i = 0; i <= 10; i++) { ctx.beginPath(); ctx.moveTo((width/10)*i, 0); ctx.lineTo((width/10)*i, height); ctx.stroke(); ctx.beginPath(); ctx.moveTo(0, (height/10)*i); ctx.lineTo(width, (height/10)*i); ctx.stroke(); }
        ctx.font = '12px Inter'; ctx.fillStyle = 'rgba(255,255,255,0.5)';
        ctx.fillText('Happy', width - 45, 20); ctx.fillText('Sad', 10, height - 10); ctx.fillText('Energetic', width - 65, height - 10); ctx.fillText('Calm', 10, 20);
        const posX = position.x * width, posY = (1 - position.y) * height;
        const glow = ctx.createRadialGradient(posX, posY, 0, posX, posY, 30);
        glow.addColorStop(0, 'rgba(6,182,212,0.4)'); glow.addColorStop(1, 'transparent');
        ctx.fillStyle = glow; ctx.beginPath(); ctx.arc(posX, posY, 30, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = 'white'; ctx.beginPath(); ctx.arc(posX, posY, 10, 0, Math.PI * 2); ctx.fill();
        ctx.strokeStyle = '#06b6d4'; ctx.lineWidth = 3; ctx.beginPath(); ctx.arc(posX, posY, 10, 0, Math.PI * 2); ctx.stroke();
      }, [position, width, height]);

      const handleInteraction = (e) => {
        const rect = canvasRef.current.getBoundingClientRect();
        const x = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        const y = Math.max(0, Math.min(1, 1 - (e.clientY - rect.top) / rect.height));
        setPosition({ x, y }); onSelect?.({ x, y, energy: x, valence: y });
      };

      return (
        <div className={`inline-block ${className}`}>
          <canvas ref={canvasRef} className="rounded-xl cursor-crosshair" style={{ border: '1px solid var(--border-subtle)' }}
            onMouseDown={(e) => { setIsDragging(true); handleInteraction(e); }} onMouseMove={(e) => isDragging && handleInteraction(e)} onMouseUp={() => setIsDragging(false)} onMouseLeave={() => setIsDragging(false)} />
          <div className="mt-3 flex justify-between text-xs" style={{ color: 'var(--text-muted)' }}><span>Energy: {(position.x * 100).toFixed(0)}%</span><span>Valence: {(position.y * 100).toFixed(0)}%</span></div>
        </div>
      );
    };

    // ======================= CHAT INTERFACE =======================
    const ChatInterface = ({ messages = [], onSend, placeholder = 'Type a message...', className = '' }) => {
      const [input, setInput] = useState('');
      const messagesEndRef = useRef(null);
      useEffect(() => { messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [messages]);
      const handleSend = () => { if (!input.trim()) return; onSend?.(input.trim()); setInput(''); };

      return (
        <div className={`flex flex-col rounded-xl overflow-hidden ${className}`} style={{ background: 'var(--bg-card)', border: '1px solid var(--border-subtle)' }}>
          <div className="flex-1 overflow-y-auto p-4 space-y-4" style={{ minHeight: '300px', maxHeight: '400px' }}>
            {messages.length === 0 ? <div className="flex flex-col items-center justify-center h-full"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="mb-4" style={{ color: 'var(--text-muted)' }}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg><p className="text-sm" style={{ color: 'var(--text-muted)' }}>Start a conversation</p></div>
              : messages.map((msg, i) => <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[80%] px-4 py-3 rounded-2xl ${msg.role === 'user' ? 'rounded-br-sm' : 'rounded-bl-sm'}`} style={{ background: msg.role === 'user' ? 'linear-gradient(135deg, var(--primary-500), var(--accent-500))' : 'var(--bg-elevated)', color: msg.role === 'user' ? 'white' : 'var(--text-primary)' }}>
                  <p className="text-sm whitespace-pre-wrap">{msg.content}</p>
                </div>
              </div>)}
            <div ref={messagesEndRef} />
          </div>
          <div className="p-4 flex items-end gap-3" style={{ borderTop: '1px solid var(--border-subtle)' }}>
            <input value={input} onChange={(e) => setInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleSend()} placeholder={placeholder} className="flex-1 px-4 py-3 rounded-xl text-sm outline-none" style={{ background: 'var(--bg-elevated)', color: 'var(--text-primary)' }} />
            <button onClick={handleSend} className="p-3 rounded-xl" style={{ background: 'linear-gradient(135deg, var(--primary-500), var(--accent-500))', color: 'white' }}><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></button>
          </div>
        </div>
      );
    };

    // ======================= NODE EDITOR =======================
    const NodeEditor = ({ nodes = [], connections = [], onNodeSelect, className = '' }) => {
      const [selectedNode, setSelectedNode] = useState(null);
      const nodeTypes = { input: { color: 'var(--success-500)' }, process: { color: 'var(--primary-500)' }, output: { color: 'var(--accent-500)' }, ai: { color: 'var(--warning-500)' } };

      return (
        <div className={`relative rounded-xl overflow-hidden ${className}`} style={{ background: 'var(--bg-surface)', border: '1px solid var(--border-subtle)', minHeight: '400px' }}>
          <svg className="absolute inset-0 w-full h-full" style={{ opacity: 0.3 }}>
            <defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="1" cy="1" r="1" fill="var(--text-muted)"/></pattern>
              <linearGradient id="cg" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stopColor="var(--primary-500)"/><stop offset="100%" stopColor="var(--accent-500)"/></linearGradient></defs>
            <rect width="100%" height="100%" fill="url(#grid)"/>
            {connections.map((conn, i) => {
              const from = nodes.find(n => n.id === conn.from), to = nodes.find(n => n.id === conn.to);
              if (!from || !to) return null;
              const fx = from.x + 120, fy = from.y + 40, tx = to.x, ty = to.y + 40, mx = (fx + tx) / 2;
              return <path key={i} d={`M ${fx} ${fy} C ${mx} ${fy}, ${mx} ${ty}, ${tx} ${ty}`} fill="none" stroke="url(#cg)" strokeWidth="2"/>;
            })}
          </svg>
          {nodes.map((node) => {
            const type = nodeTypes[node.type] || nodeTypes.process;
            const isSelected = selectedNode === node.id;
            return (
              <div key={node.id} className="absolute rounded-xl p-4 cursor-move" style={{ left: node.x, top: node.y, width: '120px', background: 'var(--bg-card)', border: `2px solid ${isSelected ? type.color : 'var(--border-subtle)'}` }}
                onClick={() => { setSelectedNode(node.id); onNodeSelect?.(node); }}>
                <div className="flex items-center gap-2 mb-2"><div className="w-8 h-8 rounded-lg flex items-center justify-center" style={{ background: `${type.color}20` }}><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={type.color} strokeWidth="2"><circle cx="12" cy="12" r="3"/></svg></div></div>
                <p className="text-xs font-medium truncate" style={{ color: 'var(--text-primary)' }}>{node.label}</p>
                <div className="absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-2" style={{ background: 'var(--bg-card)', borderColor: type.color }}/>
                <div className="absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-2" style={{ background: 'var(--bg-card)', borderColor: type.color }}/>
              </div>
            );
          })}
        </div>
      );
    };

    // ======================= TEST APP =======================
    const App = () => {
      const [selectedCoord, setSelectedCoord] = useState(null);
      const [moodValue, setMoodValue] = useState({ x: 0.5, y: 0.5 });
      const [chatMessages, setChatMessages] = useState([{ role: 'assistant', content: 'Hello! I\'m your AI music collaborator. What would you like to create today?' }]);
      const [waveformTime, setWaveformTime] = useState(30);

      const treeData = [
        { id: 'cat-1', name: 'VoiceCloning', type: 'category', count: 5, children: [
          { id: 'dom-1', name: 'Models', type: 'domain', count: 3, children: [{ id: 'ent-1', name: 'ElevenLabs', type: 'entity' }, { id: 'ent-2', name: 'KitsAI', type: 'entity' }] },
          { id: 'dom-2', name: 'Tools', type: 'domain', count: 2 }
        ]},
        { id: 'cat-2', name: 'MusicGeneration', type: 'category', count: 8, children: [
          { id: 'dom-3', name: 'Models', type: 'domain', count: 4 }, { id: 'dom-4', name: 'Platforms', type: 'domain', count: 4 }
        ]}
      ];

      const nodeData = [
        { id: 'n1', type: 'input', label: 'Audio Input', x: 50, y: 50 },
        { id: 'n2', type: 'ai', label: 'AI Enhance', x: 220, y: 100 },
        { id: 'n3', type: 'process', label: 'Mix & Master', x: 390, y: 50 },
        { id: 'n4', type: 'output', label: 'Export', x: 560, y: 100 }
      ];
      const nodeConnections = [{ from: 'n1', to: 'n2' }, { from: 'n2', to: 'n3' }, { from: 'n3', to: 'n4' }];

      const handleSendMessage = (msg) => {
        setChatMessages([...chatMessages, { role: 'user', content: msg }, { role: 'assistant', content: `I'll help you with: "${msg}". Let me analyze your request...` }]);
      };

      return (
        <div className="min-h-screen p-8" style={{ background: 'var(--bg-void)' }}>
          <h1 className="text-3xl font-display font-bold mb-8" style={{ background: 'linear-gradient(135deg, var(--primary-400), var(--accent-500))', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
            vkTUNEos Media Components Test - Session 3
          </h1>

          {/* MEDIA COMPONENTS */}
          <section className="mb-12">
            <h2 className="text-xl font-display font-semibold mb-6" style={{ color: 'var(--text-primary)' }}>Media Components</h2>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div>
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Audio Player</h3>
                <AudioPlayer title="Summer Vibes" artist="vkTUNEos Demo" />
              </div>
              <div>
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Waveform</h3>
                <div className="p-4 rounded-xl" style={{ background: 'var(--bg-card)', border: '1px solid var(--border-subtle)' }}>
                  <Waveform currentTime={waveformTime} duration={100} onSeek={setWaveformTime} height={60} />
                  <input type="range" min="0" max="100" value={waveformTime} onChange={(e) => setWaveformTime(Number(e.target.value))} className="w-full mt-4" />
                </div>
              </div>
              <div className="lg:col-span-2">
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Video Player</h3>
                <VideoPlayer poster="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800" title="Music Video Demo" className="aspect-video" />
              </div>
            </div>
          </section>

          {/* SPECIAL COMPONENTS */}
          <section className="mb-12">
            <h2 className="text-xl font-display font-semibold mb-6" style={{ color: 'var(--text-primary)' }}>Special Components</h2>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div>
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Coordinate Tree</h3>
                <CoordinateTree data={treeData} selectedId={selectedCoord?.id} onSelect={setSelectedCoord} />
                {selectedCoord && <p className="mt-2 text-sm" style={{ color: 'var(--text-muted)' }}>Selected: {selectedCoord.name}</p>}
              </div>
              <div>
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Mood Pad</h3>
                <MoodPad onSelect={setMoodValue} />
              </div>
              <div>
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Chat Interface</h3>
                <ChatInterface messages={chatMessages} onSend={handleSendMessage} placeholder="Ask AI Collaborator..." />
              </div>
              <div>
                <h3 className="text-sm font-medium mb-3" style={{ color: 'var(--text-secondary)' }}>Node Editor</h3>
                <NodeEditor nodes={nodeData} connections={nodeConnections} onNodeSelect={(n) => console.log('Selected:', n)} />
              </div>
            </div>
          </section>

          <div className="text-center py-8" style={{ color: 'var(--text-muted)' }}>
            <p>SESSION 3 COMPLETE. Run Session 4.</p>
          </div>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    console.log('=== SESSION 3 MEDIA TEST ===');
    console.log('All media and special components loaded');
  </script>
</body>
</html>
